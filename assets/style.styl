tour-beacon
  display block
  height 40px
  width 40px
  cursor pointer

  span
    content ''
    position absolute
    left 50%
    top 50%
    margin -15px 0 0 -15px
    display block
    height 30px
    width 30px
    border-radius 100%
    background-color #3f94d0
    cursor pointer
    animation-name pulse
    animation-duration 1.5s
    animation-iteration-count infinite
    animation-timing-function ease-out

tour-backdrop
  z-index 998
  position fixed
  top 0
  right 0
  bottom 0
  left 0
  text-align center
  background rgba(0, 0, 0, .45)

tour-tooltip
  display block
  position relative
  max-width 250px
  background-color #fff
  color #545454
  border 1px solid #ddd
  border-radius 4px
  padding 15px
  box-shadow 0 8px 6px -6px rgba(0, 0, 0, .4)
  text-align center
  cursor default
  animation-fill-mode both
  opacity 0 // starts invisible to be animated in

  &:before
  &:after
    content ''
    display block
    width 0
    height 0
    position absolute

  // Left
  .tether-target-attached-left &:before
  .tether-target-attached-left &:after
    left 100%
    top 50%
    transform translateY(-50%)

  .tether-target-attached-left &:before
    border-top 6px solid transparent
    border-bottom 6px solid transparent
    border-left 6px solid #fff
    border-right none
    z-index 1

  .tether-target-attached-left &:after
    border-top 7px solid transparent
    border-bottom 7px solid transparent
    border-left 7px solid #ddd
    border-right none

  // Right
  .tether-target-attached-right &:before
  .tether-target-attached-right &:after
    right 100%
    top 50%
    transform translateY(-50%)

  .tether-target-attached-right &:before
    border-top 6px solid transparent
    border-bottom 6px solid transparent
    border-right 6px solid #fff
    border-left 0
    z-index 1

  .tether-target-attached-right &:after
    border-top 7px solid transparent
    border-bottom 7px solid transparent
    border-right 7px solid #ddd
    border-left 0

  // Top
  .tether-target-attached-top &:before
  .tether-target-attached-top &:after
    top 100%
    left 50%
    transform translateX(-50%)

  .tether-target-attached-top &:before
    border-left 6px solid transparent
    border-right 6px solid transparent
    border-top 6px solid #fff
    border-bottom none
    z-index 1

  .tether-target-attached-top &:after
    border-left 7px solid transparent
    border-right 7px solid transparent
    border-top 7px solid #ddd
    border-bottom none

  // Bottom
  .tether-target-attached-bottom &:before
  .tether-target-attached-bottom &:after
    bottom 100%
    left 50%
    transform translateX(-50%)

  .tether-target-attached-bottom &:before
    border-left 6px solid transparent
    border-right 6px solid transparent
    border-bottom 6px solid #fff
    border-top none
    z-index 1

  .tether-target-attached-bottom &:after
    border-left 7px solid transparent
    border-right 7px solid transparent
    border-bottom 7px solid #ddd
    border-top none

  // Diagonals
  // Top/Bottom Left
  .tether-target-attached-top.tether-target-attached-left &:before
  .tether-target-attached-top.tether-target-attached-left &:after
  .tether-target-attached-bottom.tether-target-attached-left &:before
  .tether-target-attached-bottom.tether-target-attached-left &:after
    left auto
    right 10px
    transform none

  // Top/Bottom Right
  .tether-target-attached-top.tether-target-attached-right &:before
  .tether-target-attached-top.tether-target-attached-right &:after
  .tether-target-attached-bottom.tether-target-attached-right &:before
  .tether-target-attached-bottom.tether-target-attached-right &:after
    left 10px
    transform none

  // Bottom offset
  .tether-target-attached-bottom.tether-target-attached-left &:before
  .tether-target-attached-bottom.tether-target-attached-left &:after
  .tether-target-attached-bottom.tether-target-attached-right &:before
  .tether-target-attached-bottom.tether-target-attached-right &:after
    top auto

  p
    margin-bottom 15px

.tour-highlighted
  transform-origin 50% !important
  transform scale(1.25) !important

.tour-clone
  transition transform 300ms ease-in !important

.tour-overlay
  position relative
  display block
  height 100%
  transition -webkit-filter 500ms ease-in

  &:after
    content ''
    position fixed
    left 0
    top 0
    width 0
    height 0
    overflow hidden
    background-color rgba(0,0,0,0)
    will-change background-color
    transition background-color 500ms ease-in

  &.tour-faded
    -webkit-filter grayscale(1) blur(2px)

    &:after
      width 100vw
      height 100vh
      background-color rgba(0, 0, 0, .6)

// Animations
$animDuration = 300ms
$animMotionStep = 30px
$animEasingIn = ease-out
$animEasingOut = ease-in
$animBank = {
  '_tether-target-attached-bottom': translateY(-($animMotionStep)),
  '_tether-target-attached-bottom_tether-target-attached-left': translate($animMotionStep, -($animMotionStep)),
  '_tether-target-attached-bottom_tether-target-attached-right': translate(-($animMotionStep), -($animMotionStep)),
  '_tether-target-attached-left': translateX($animMotionStep),
  '_tether-target-attached-left_tether-target-attached-top': translate($animMotionStep, $animMotionStep),
  '_tether-target-attached-left_tether-target-attached-bottom': translate($animMotionStep, -($animMotionStep)),
  '_tether-target-attached-top': translateY($animMotionStep),
  '_tether-target-attached-top_tether-target-attached-left': translate($animMotionStep, $animMotionStep),
  '_tether-target-attached-top_tether-target-attached-right': translate(-($animMotionStep), $animMotionStep),
  '_tether-target-attached-right': translateX(-($animMotionStep)),
  '_tether-target-attached-right_tether-target-attached-top': translate(-($animMotionStep), $animMotionStep),
  '_tether-target-attached-right_tether-target-attached-bottom': translate(-($animMotionStep), -($animMotionStep))
}

// Generator
for $name, $motion in $animBank
  {replace('_', '.', $name)} tour-tooltip.tour-in
    animation-name fadeIn- + $name
    animation-duration $animDuration
    animation-timing-function $animEasingIn
  {replace('_', '.', $name)} tour-tooltip.tour-out
    animation-name fadeOut- + $name
    animation-duration $animDuration
    animation-timing-function $animEasingOut
  @keyframes fadeIn-{$name}
    from
      transform $motion scale(.8)
      opacity 0
    to
      transform none
      opacity 1
  @keyframes fadeOut-{$name}
    from
      transform none
      opacity 1
    to
      transform $motion scale(.8)
      opacity 0

// Beacon
@keyframes pulse
  0%
    transform scale(.3)
    opacity .5
  80%
    transform scale(1.5)
    opacity 0.01
  100%
    transform scale(2.5)
    opacity 0

// Tether

.tether-element
  z-index 999

.tether-out-of-bounds tour-beacon
  opacity: 0

.tour-faded ~ div > tour-beacon
  display: none
